# Simple-Button
[English](../README.md)
[中文](./README_zh.md)

---

## 目录

- [目录](#目录)

- [简介](#简介)
    - [设计简介](#设计简介)
    - [功能简介](#功能简介)

---

## 简介

### 设计简介

- 按键是嵌入式设计当中最简单、最常见也最有效的输入。如今的GitHub上已经有相当多成熟的按键开源项目了，但我仍然发现了许多这些项目没有解决的问题，于是产生了自己制作一个按键项目的想法。这个项目应当具有以下特点：

- 1. **功能全面** - “全面”指的是：至少支持*短按、长按、计时长按、多击、计数多击、组合键*。
- 2. **部署简单** - “简单”指的是：只提供一个创建按键的接口，一行代码即可静态注册（创建）一个按键。
- 3. **使用状态机** - 目的是：非阻塞消抖的同时，具有较高的拓展性，且层次结构分明。
- 4. **使用外部中断** - 目的是：使用中断而非轮询有利于*低功耗*的支持。

- 于是，在综合考量之后，我选择**使用C语言的宏来模拟产生类似C++模板的功能**。用户只需要使用提供好的模板，就可以使用一行代码创建一个按键对象（实际上是一个结构体和三个函数）。

- 除了初始化函数需要显式调用以外，其他两个函数的调用方式是类似C++的“方法”的。这是我使用C语言进行面对对象的一次尝试。

### 功能简介

- **在[设计思想](#设计简介)的指导下，本项目实现了一个基于C99标准（或C++11标准）的纯C语言按键项目。**

1. ✅ **功能全面**： 本项目目前支持*短按、长按、计时长按、多击、计数多击、组合键*，并预计在未来的几个版本中加入*长按保持*的支持。

2. ✅ **状态机**： 本项目使用了状态机进行代码组织，扩展性强。但用户无需了解状态机细节即可轻松使用。

3. ✅ **外部中断**： 本项目使用外部中断触发按键，*天然支持低功耗*，项目也提供一行代码判断并进入低功耗的接口。

4. ✅ **二次确认**： 本项目对引脚触发信号进行二次确认，从而支持 GPIOX 相同编号引脚同时作为按键引脚，无需担心外部中断冲突。

5. ✅ **自定义按键**： 本项目支持对每个按键单独设置*长按判定最小时间、多击窗口时间、冷却时间*，方便按键自定义。

6. ✅ **多线程安全**： 本项目支持开启多线程模式来保证多线程安全。

7. ✅ **调试支持**： 本项目支持开启调试模式来定位异常，方便对项目进行二次开发。

[回到目录](#目录)

---



